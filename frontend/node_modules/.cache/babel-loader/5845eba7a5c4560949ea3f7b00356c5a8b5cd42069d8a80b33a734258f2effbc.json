{"ast":null,"code":"import _objectSpread from\"D:/ajay/Result_Analysis/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/pages/Teacher/UpdateMarks.jsx\nimport React,{useEffect,useState}from\"react\";import api from\"../../services/api\";import{useAuth}from\"../../context/AuthContext\";import{useLocation,useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function UpdateMarks(){useAuth();const navigate=useNavigate();const location=useLocation();const[allocations,setAllocations]=useState([]);const[division,setDivision]=useState(\"\");const[studentRoll,setStudentRoll]=useState(\"\");const[rows,setRows]=useState([]);const[chosenSubjectId,setChosenSubjectId]=useState(\"\");const[chosenSubjectCode,setChosenSubjectCode]=useState(\"\");const[loading,setLoading]=useState(false);const[errors,setErrors]=useState({});const FIELD_LIMITS={unit1:25,unit2:25,term:50,annual:100,internal:20};// Display/order: U1, Term, U2, Internal, Annual\nconst FIELD_ORDER=[\"unit1\",\"term\",\"unit2\",\"internal\",\"annual\"];// Load teacher allocations\nuseEffect(()=>{async function loadAlloc(){const res=await api.get(\"/auth/me\");const alloc=res.data.allocations||[];setAllocations(alloc);if(alloc.length){setDivision(alloc[0].division);setChosenSubjectId(alloc[0].subject_id);setChosenSubjectCode(alloc[0].subject_code);}}loadAlloc();},[]);// detect URL params\nuseEffect(()=>{const q=new URLSearchParams(location.search);if(q.get(\"subject_id\"))setChosenSubjectId(q.get(\"subject_id\"));if(q.get(\"division\"))setDivision(q.get(\"division\"));},[location.search]);// Auto-fetch students when subject or division changes\nuseEffect(()=>{if(chosenSubjectId&&division){fetchStudents();}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[chosenSubjectId,division]);const fetchStudents=async()=>{if(!chosenSubjectId||!division)return alert(\"Select subject & division\");setLoading(true);try{const res=await api.get(\"/teacher/marks\",{params:{subject_id:chosenSubjectId,division}});setRows((res.data||[]).map(r=>_objectSpread(_objectSpread({},r),{},{mark:r.mark||{unit1:\"\",unit2:\"\",term:\"\",annual:\"\",internal:\"\"}})).filter(r=>{if(!studentRoll)return true;return String(r.roll_no).startsWith(String(studentRoll));}).sort((a,b)=>Number(a.roll_no)-Number(b.roll_no)));}catch(_unused){setRows([]);}setLoading(false);};const onChange=(roll,field,val)=>{setRows(prev=>prev.map(r=>r.roll_no===roll?_objectSpread(_objectSpread({},r),{},{mark:_objectSpread(_objectSpread({},r.mark),{},{[field]:val})}):r));const n=Number(val);const key=roll+\"_\"+field;if(val===\"\"||n>=0&&n<=FIELD_LIMITS[field]){setErrors(p=>{const x=_objectSpread({},p);delete x[key];return x;});}else{setErrors(p=>_objectSpread(_objectSpread({},p),{},{[key]:\"Invalid\"}));}};const saveAll=async()=>{if(Object.keys(errors).length)return alert(\"Fix errors first\");if(!window.confirm(\"Save all marks?\"))return;setLoading(true);try{const entries=rows.map(r=>_objectSpread({roll_no:r.roll_no,division,subject_id:Number(chosenSubjectId)},Object.fromEntries(Object.keys(FIELD_LIMITS).map(f=>[f,Number(r.mark[f])||0]))));await api.post(\"/teacher/marks/batch\",{entries});alert(\"Saved successfully\");fetchStudents();}catch(_unused2){alert(\"Save failed\");}setLoading(false);};return/*#__PURE__*/_jsx(\"div\",{style:page,children:/*#__PURE__*/_jsxs(\"div\",{style:card,children:[/*#__PURE__*/_jsx(\"h2\",{style:title,children:\"Update Marks\"}),/*#__PURE__*/_jsx(\"button\",{style:btnBack,onClick:()=>navigate(-1),children:\"\\u2190 Go Back\"}),/*#__PURE__*/_jsxs(\"div\",{style:grid,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:label,children:\"Subject\"}),/*#__PURE__*/_jsxs(\"select\",{style:input,value:chosenSubjectId,onChange:e=>{const id=e.target.value;const obj=allocations.find(a=>String(a.subject_id)===id);setChosenSubjectId(id);setChosenSubjectCode(obj===null||obj===void 0?void 0:obj.subject_code);setDivision((obj===null||obj===void 0?void 0:obj.division)||division);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select\"}),allocations.map(a=>/*#__PURE__*/_jsxs(\"option\",{value:a.subject_id,children:[a.subject_code,\" \\u2014 \",a.subject_name]},a.subject_id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:label,children:\"Division\"}),/*#__PURE__*/_jsx(\"select\",{style:input,value:division,onChange:e=>setDivision(e.target.value),children:[\"A\",\"B\",\"C\"].map(d=>/*#__PURE__*/_jsx(\"option\",{children:d},d))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:label,children:\"Roll No\"}),/*#__PURE__*/_jsx(\"input\",{style:input,value:studentRoll,onChange:e=>setStudentRoll(e.target.value)})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",alignItems:\"flex-end\"},children:/*#__PURE__*/_jsx(\"button\",{style:btnPrimary,onClick:fetchStudents,children:\"Search\"})})]}),loading&&/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}),rows.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:subTitle,children:[\"Subject: \",chosenSubjectCode,\" | Division: \",division]}),/*#__PURE__*/_jsxs(\"table\",{style:table,children:[/*#__PURE__*/_jsx(\"thead\",{style:thead,children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Roll\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"U1\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Term\"}),/*#__PURE__*/_jsx(\"th\",{children:\"U2\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Internal\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Annual\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Average\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:rows.map(r=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:r.roll_no}),/*#__PURE__*/_jsx(\"td\",{children:r.name}),FIELD_ORDER.map(f=>{var _r$mark$f;return/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:(_r$mark$f=r.mark[f])!==null&&_r$mark$f!==void 0?_r$mark$f:\"\",style:_objectSpread(_objectSpread({},input),{},{width:70}),onChange:e=>onChange(r.roll_no,f,e.target.value)}),errors[r.roll_no+\"_\"+f]&&/*#__PURE__*/_jsx(\"div\",{style:err,children:\"Invalid\"})]},f);}),/*#__PURE__*/_jsx(\"td\",{style:{textAlign:\"center\"},children:(()=>{const m=r.mark||{};const u1=Number(m.unit1)||0;const u2=Number(m.unit2)||0;const term=Number(m.term)||0;const annual=Number(m.annual)||0;const internal=Number(m.internal)||0;const tot=u1+u2+term+annual+internal;return tot||\"-\";})()}),/*#__PURE__*/_jsx(\"td\",{style:{textAlign:\"center\"},children:(()=>{const m=r.mark||{};const u1=Number(m.unit1)||0;const u2=Number(m.unit2)||0;const term=Number(m.term)||0;const annual=Number(m.annual)||0;const internal=Number(m.internal)||0;const tot=u1+u2+term+annual+internal;const avg=tot?(tot/2).toFixed(2):\"-\";return avg;})()})]},r.roll_no))})]}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:\"right\",marginTop:20},children:/*#__PURE__*/_jsx(\"button\",{style:btnSave,onClick:saveAll,children:\"Save All\"})})]})]})});}/* ---------------------- STYLES ---------------------- */const page={minHeight:\"100vh\",background:\"#f4f6f9\",padding:40};const card={maxWidth:1200,margin:\"auto\",background:\"#fff\",padding:24,borderRadius:12};const title={fontWeight:800,marginBottom:20};const subTitle={fontWeight:700,marginBottom:10};const label={fontWeight:600,marginBottom:6,display:\"block\"};const grid={display:\"grid\",gridTemplateColumns:\"repeat(auto-fit,minmax(220px,1fr))\",gap:16};const input={width:\"100%\",padding:\"10px\",borderRadius:6,border:\"1px solid #ccc\"};const btnPrimary={padding:\"10px 16px\",background:\"#0d6efd\",color:\"#fff\",borderRadius:6};const btnSave={padding:\"12px 18px\",background:\"#27ae60\",color:\"#fff\",borderRadius:6};const btnBack={marginBottom:15,background:\"#555\",color:\"#fff\",padding:\"8px 12px\",borderRadius:6};const table={width:\"100%\",borderCollapse:\"collapse\"};const thead={background:\"#eee\"};const err={color:\"#c0392b\",fontSize:12};","map":{"version":3,"names":["React","useEffect","useState","api","useAuth","useLocation","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UpdateMarks","navigate","location","allocations","setAllocations","division","setDivision","studentRoll","setStudentRoll","rows","setRows","chosenSubjectId","setChosenSubjectId","chosenSubjectCode","setChosenSubjectCode","loading","setLoading","errors","setErrors","FIELD_LIMITS","unit1","unit2","term","annual","internal","FIELD_ORDER","loadAlloc","res","get","alloc","data","length","subject_id","subject_code","q","URLSearchParams","search","fetchStudents","alert","params","map","r","_objectSpread","mark","filter","String","roll_no","startsWith","sort","a","b","Number","_unused","onChange","roll","field","val","prev","n","key","p","x","saveAll","Object","keys","window","confirm","entries","fromEntries","f","post","_unused2","style","page","children","card","title","btnBack","onClick","grid","label","input","value","e","id","target","obj","find","subject_name","d","display","alignItems","btnPrimary","subTitle","table","thead","name","_r$mark$f","type","width","err","textAlign","m","u1","u2","tot","avg","toFixed","marginTop","btnSave","minHeight","background","padding","maxWidth","margin","borderRadius","fontWeight","marginBottom","gridTemplateColumns","gap","border","color","borderCollapse","fontSize"],"sources":["D:/ajay/Result_Analysis/frontend/src/pages/Teacher/UpdateMarks.jsx"],"sourcesContent":["// src/pages/Teacher/UpdateMarks.jsx\r\nimport React, { useEffect, useState } from \"react\";\r\nimport api from \"../../services/api\";\r\nimport { useAuth } from \"../../context/AuthContext\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\n\r\nexport default function UpdateMarks() {\r\n  useAuth();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n\r\n  const [allocations, setAllocations] = useState([]);\r\n  const [division, setDivision] = useState(\"\");\r\n  const [studentRoll, setStudentRoll] = useState(\"\");\r\n  const [rows, setRows] = useState([]);\r\n  const [chosenSubjectId, setChosenSubjectId] = useState(\"\");\r\n  const [chosenSubjectCode, setChosenSubjectCode] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [errors, setErrors] = useState({});\r\n\r\n  const FIELD_LIMITS = { unit1: 25, unit2: 25, term: 50, annual: 100, internal: 20 };\r\n  // Display/order: U1, Term, U2, Internal, Annual\r\n  const FIELD_ORDER = [\"unit1\", \"term\", \"unit2\", \"internal\", \"annual\"];\r\n\r\n  // Load teacher allocations\r\n  useEffect(() => {\r\n    async function loadAlloc() {\r\n      const res = await api.get(\"/auth/me\");\r\n      const alloc = res.data.allocations || [];\r\n      setAllocations(alloc);\r\n\r\n      if (alloc.length) {\r\n        setDivision(alloc[0].division);\r\n        setChosenSubjectId(alloc[0].subject_id);\r\n        setChosenSubjectCode(alloc[0].subject_code);\r\n      }\r\n    }\r\n    loadAlloc();\r\n  }, []);\r\n\r\n  // detect URL params\r\n  useEffect(() => {\r\n    const q = new URLSearchParams(location.search);\r\n    if (q.get(\"subject_id\")) setChosenSubjectId(q.get(\"subject_id\"));\r\n    if (q.get(\"division\")) setDivision(q.get(\"division\"));\r\n  }, [location.search]);\r\n\r\n  // Auto-fetch students when subject or division changes\r\n  useEffect(() => {\r\n    if (chosenSubjectId && division) {\r\n      fetchStudents();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [chosenSubjectId, division]);\r\n\r\n  const fetchStudents = async () => {\r\n    if (!chosenSubjectId || !division) return alert(\"Select subject & division\");\r\n\r\n    setLoading(true);\r\n    try {\r\n      const res = await api.get(\"/teacher/marks\", {\r\n        params: { subject_id: chosenSubjectId, division },\r\n      });\r\n\r\n      setRows(\r\n        (res.data || [])\r\n          .map((r) => ({\r\n            ...r,\r\n            mark: r.mark || { unit1: \"\", unit2: \"\", term: \"\", annual: \"\", internal: \"\" },\r\n          }))\r\n          .filter((r) => {\r\n            if (!studentRoll) return true;\r\n            return String(r.roll_no).startsWith(String(studentRoll));\r\n          })\r\n          .sort((a, b) => Number(a.roll_no) - Number(b.roll_no))\r\n      );\r\n    } catch {\r\n      setRows([]);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const onChange = (roll, field, val) => {\r\n    setRows((prev) =>\r\n      prev.map((r) =>\r\n        r.roll_no === roll ? { ...r, mark: { ...r.mark, [field]: val } } : r\r\n      )\r\n    );\r\n\r\n    const n = Number(val);\r\n    const key = roll + \"_\" + field;\r\n\r\n    if (val === \"\" || (n >= 0 && n <= FIELD_LIMITS[field])) {\r\n      setErrors((p) => {\r\n        const x = { ...p };\r\n        delete x[key];\r\n        return x;\r\n      });\r\n    } else {\r\n      setErrors((p) => ({ ...p, [key]: \"Invalid\" }));\r\n    }\r\n  };\r\n\r\n  const saveAll = async () => {\r\n    if (Object.keys(errors).length) return alert(\"Fix errors first\");\r\n\r\n    if (!window.confirm(\"Save all marks?\")) return;\r\n\r\n    setLoading(true);\r\n    try {\r\n      const entries = rows.map((r) => ({\r\n        roll_no: r.roll_no,\r\n        division,\r\n        subject_id: Number(chosenSubjectId),\r\n        ...Object.fromEntries(\r\n            Object.keys(FIELD_LIMITS).map((f) => [f, Number(r.mark[f]) || 0])\r\n        ),\r\n      }));\r\n\r\n      await api.post(\"/teacher/marks/batch\", { entries });\r\n      alert(\"Saved successfully\");\r\n      fetchStudents();\r\n    } catch {\r\n      alert(\"Save failed\");\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div style={page}>\r\n      <div style={card}>\r\n        <h2 style={title}>Update Marks</h2>\r\n\r\n        <button style={btnBack} onClick={() => navigate(-1)}>\r\n          ← Go Back\r\n        </button>\r\n\r\n        <div style={grid}>\r\n          <div>\r\n            <label style={label}>Subject</label>\r\n            <select\r\n              style={input}\r\n              value={chosenSubjectId}\r\n              onChange={(e) => {\r\n                const id = e.target.value;\r\n                const obj = allocations.find((a) => String(a.subject_id) === id);\r\n\r\n                setChosenSubjectId(id);\r\n                setChosenSubjectCode(obj?.subject_code);\r\n                setDivision(obj?.division || division);\r\n              }}\r\n            >\r\n              <option value=\"\">Select</option>\r\n              {allocations.map((a) => (\r\n                <option key={a.subject_id} value={a.subject_id}>\r\n                  {a.subject_code} — {a.subject_name}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label style={label}>Division</label>\r\n            <select style={input} value={division} onChange={(e) => setDivision(e.target.value)}>\r\n              {[\"A\", \"B\", \"C\"].map((d) => (\r\n                <option key={d}>{d}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label style={label}>Roll No</label>\r\n            <input style={input} value={studentRoll} onChange={(e) => setStudentRoll(e.target.value)} />\r\n          </div>\r\n\r\n          <div style={{ display: \"flex\", alignItems: \"flex-end\" }}>\r\n            <button style={btnPrimary} onClick={fetchStudents}>\r\n              Search\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {loading && <div>Loading...</div>}\r\n\r\n        {rows.length > 0 && (\r\n          <>\r\n            <div style={subTitle}>\r\n              Subject: {chosenSubjectCode} | Division: {division}\r\n            </div>\r\n\r\n            <table style={table}>\r\n              <thead style={thead}>\r\n                <tr>\r\n                  <th>Roll</th>\r\n                  <th>Name</th>\r\n                  <th>U1</th>\r\n                  <th>Term</th>\r\n                  <th>U2</th>\r\n                  <th>Internal</th>\r\n                  <th>Annual</th>\r\n                  <th>Total</th>\r\n                  <th>Average</th>\r\n                </tr>\r\n              </thead>\r\n\r\n              <tbody>\r\n                {rows.map((r) => (\r\n                  <tr key={r.roll_no}>\r\n                    <td>{r.roll_no}</td>\r\n                    <td>{r.name}</td>\r\n                    {FIELD_ORDER.map((f) => (\r\n                      <td key={f}>\r\n                        <input\r\n                          type=\"number\"\r\n                          value={r.mark[f] ?? \"\"}\r\n                          style={{ ...input, width: 70 }}\r\n                          onChange={(e) => onChange(r.roll_no, f, e.target.value)}\r\n                        />\r\n                        {errors[r.roll_no + \"_\" + f] && <div style={err}>Invalid</div>}\r\n                      </td>\r\n                    ))}\r\n\r\n                    <td style={{ textAlign: \"center\" }}>\r\n                      {(() => {\r\n                        const m = r.mark || {};\r\n                        const u1 = Number(m.unit1) || 0;\r\n                        const u2 = Number(m.unit2) || 0;\r\n                        const term = Number(m.term) || 0;\r\n                        const annual = Number(m.annual) || 0;\r\n                        const internal = Number(m.internal) || 0;\r\n                        const tot = u1 + u2 + term + annual + internal;\r\n                        return tot || \"-\";\r\n                      })()}\r\n                    </td>\r\n\r\n                    <td style={{ textAlign: \"center\" }}>\r\n                      {(() => {\r\n                        const m = r.mark || {};\r\n                        const u1 = Number(m.unit1) || 0;\r\n                        const u2 = Number(m.unit2) || 0;\r\n                        const term = Number(m.term) || 0;\r\n                        const annual = Number(m.annual) || 0;\r\n                        const internal = Number(m.internal) || 0;\r\n                        const tot = u1 + u2 + term + annual + internal;\r\n                        const avg = tot ? (tot / 2).toFixed(2) : \"-\";\r\n                        return avg;\r\n                      })()}\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n\r\n            <div style={{ textAlign: \"right\", marginTop: 20 }}>\r\n              <button style={btnSave} onClick={saveAll}>\r\n                Save All\r\n              </button>\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ---------------------- STYLES ---------------------- */\r\nconst page = { minHeight: \"100vh\", background: \"#f4f6f9\", padding: 40 };\r\nconst card = { maxWidth: 1200, margin: \"auto\", background: \"#fff\", padding: 24, borderRadius: 12 };\r\nconst title = { fontWeight: 800, marginBottom: 20 };\r\nconst subTitle = { fontWeight: 700, marginBottom: 10 };\r\nconst label = { fontWeight: 600, marginBottom: 6, display: \"block\" };\r\nconst grid = { display: \"grid\", gridTemplateColumns: \"repeat(auto-fit,minmax(220px,1fr))\", gap: 16 };\r\nconst input = { width: \"100%\", padding: \"10px\", borderRadius: 6, border: \"1px solid #ccc\" };\r\nconst btnPrimary = { padding: \"10px 16px\", background: \"#0d6efd\", color: \"#fff\", borderRadius: 6 };\r\nconst btnSave = { padding: \"12px 18px\", background: \"#27ae60\", color: \"#fff\", borderRadius: 6 };\r\nconst btnBack = { marginBottom: 15, background: \"#555\", color: \"#fff\", padding: \"8px 12px\", borderRadius: 6 };\r\nconst table = { width: \"100%\", borderCollapse: \"collapse\" };\r\nconst thead = { background: \"#eee\" };\r\nconst err = { color: \"#c0392b\", fontSize: 12 };\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}