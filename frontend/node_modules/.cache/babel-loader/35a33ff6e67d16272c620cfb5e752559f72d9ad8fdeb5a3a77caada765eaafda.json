{"ast":null,"code":"var _jsxFileName = \"D:\\\\ajay\\\\Result_Analysis\\\\frontend\\\\src\\\\pages\\\\Admin\\\\StatementOfMarks.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useParams } from 'react-router-dom';\nimport api from '../../services/api';\nimport { useAuth } from '../../context/AuthContext';\nimport MarksheetTemplate from '../../components/MarksheetTemplate';\nimport html2pdf from 'html2pdf.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function StatementOfMarks() {\n  _s();\n  useAuth();\n  const {\n    division,\n    rollNo\n  } = useParams();\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const reportRef = useRef();\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        const res = await api.get('/admin/results', {\n          params: {\n            division,\n            roll_no: rollNo\n          }\n        });\n        let resultData = res.data;\n        if (Array.isArray(resultData) && resultData.length > 0) {\n          resultData = resultData[0];\n        } else if (Array.isArray(resultData) && resultData.length === 0) {\n          resultData = null;\n        }\n        setData(resultData);\n      } catch (err) {\n        console.error(\"Failed to fetch result\", err);\n      } finally {\n        setLoading(false);\n      }\n    }\n    fetchData();\n  }, [division, rollNo]);\n  const handleDownloadPDF = () => {\n    if (!reportRef.current) return;\n    const element = reportRef.current;\n    const opt = {\n      margin: [5, 10, 5, 10],\n      // top, left, bottom, right in mm\n      filename: `Report_${division}_${data === null || data === void 0 ? void 0 : data.roll_no}.pdf`,\n      image: {\n        type: 'jpeg',\n        quality: 0.98\n      },\n      html2canvas: {\n        scale: 2\n      },\n      // Higher scale for better clarity\n      jsPDF: {\n        unit: 'mm',\n        format: 'a4',\n        orientation: 'landscape'\n      }\n    };\n    html2pdf().set(opt).from(element).save();\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading report...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 23\n  }, this);\n  if (!data) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Student not found.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"no-print\",\n      style: {\n        padding: 20,\n        textAlign: 'right',\n        gap: 10,\n        display: 'flex',\n        justifyContent: 'flex-end',\n        background: '#f5f5f5'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => window.print(),\n        style: btnStyle,\n        children: \"Print / Save as PDF (Browser)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleDownloadPDF,\n        style: {\n          ...btnStyle,\n          background: '#d32f2f'\n        },\n        children: \"Download PDF (Direct)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n        @media print {\n           .no-print { display: none !important; }\n           /* Ensure body margin is reset */\n           body { margin: 0; padding: 0; }\n        }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MarksheetTemplate, {\n      ref: reportRef,\n      data: data\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n}\n_s(StatementOfMarks, \"I5evItd4ZCb7Nvc67cg1MEvbsnw=\", false, function () {\n  return [useAuth, useParams];\n});\n_c = StatementOfMarks;\nconst btnStyle = {\n  padding: '10px 16px',\n  fontSize: 14,\n  fontWeight: 'bold',\n  cursor: 'pointer',\n  background: '#1976d2',\n  color: 'white',\n  border: 'none',\n  borderRadius: 4\n};\nvar _c;\n$RefreshReg$(_c, \"StatementOfMarks\");","map":{"version":3,"names":["React","useEffect","useState","useRef","useParams","api","useAuth","MarksheetTemplate","html2pdf","jsxDEV","_jsxDEV","StatementOfMarks","_s","division","rollNo","data","setData","loading","setLoading","reportRef","fetchData","res","get","params","roll_no","resultData","Array","isArray","length","err","console","error","handleDownloadPDF","current","element","opt","margin","filename","image","type","quality","html2canvas","scale","jsPDF","unit","format","orientation","set","from","save","children","fileName","_jsxFileName","lineNumber","columnNumber","className","style","padding","textAlign","gap","display","justifyContent","background","onClick","window","print","btnStyle","ref","_c","fontSize","fontWeight","cursor","color","border","borderRadius","$RefreshReg$"],"sources":["D:/ajay/Result_Analysis/frontend/src/pages/Admin/StatementOfMarks.jsx"],"sourcesContent":["\r\nimport React, { useEffect, useState, useRef } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport api from '../../services/api';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport MarksheetTemplate from '../../components/MarksheetTemplate';\r\nimport html2pdf from 'html2pdf.js';\r\n\r\nexport default function StatementOfMarks() {\r\n  useAuth();\r\n  const { division, rollNo } = useParams();\r\n  const [data, setData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const reportRef = useRef();\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      try {\r\n        const res = await api.get('/admin/results', {\r\n          params: { division, roll_no: rollNo }\r\n        });\r\n        let resultData = res.data;\r\n        if (Array.isArray(resultData) && resultData.length > 0) {\r\n          resultData = resultData[0];\r\n        } else if (Array.isArray(resultData) && resultData.length === 0) {\r\n            resultData = null;\r\n        }\r\n        setData(resultData);\r\n      } catch (err) {\r\n        console.error(\"Failed to fetch result\", err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    fetchData();\r\n  }, [division, rollNo]);\r\n\r\n  const handleDownloadPDF = () => {\r\n    if (!reportRef.current) return;\r\n    const element = reportRef.current;\r\n    \r\n    const opt = {\r\n      margin: [5, 10, 5, 10], // top, left, bottom, right in mm\r\n      filename: `Report_${division}_${data?.roll_no}.pdf`,\r\n      image: { type: 'jpeg', quality: 0.98 },\r\n      html2canvas: { scale: 2 }, // Higher scale for better clarity\r\n      jsPDF: { unit: 'mm', format: 'a4', orientation: 'landscape' }\r\n    };\r\n\r\n    html2pdf().set(opt).from(element).save();\r\n  };\r\n\r\n  if (loading) return <div>Loading report...</div>;\r\n  if (!data) return <div>Student not found.</div>;\r\n\r\n  return (\r\n    <div>\r\n      {/* Controls - Hidden during print */}\r\n      <div className=\"no-print\" style={{ padding: 20, textAlign: 'right', gap: 10, display: 'flex', justifyContent: 'flex-end', background: '#f5f5f5' }}>\r\n        <button \r\n          onClick={() => window.print()} \r\n          style={btnStyle}\r\n        >\r\n          Print / Save as PDF (Browser)\r\n        </button>\r\n        <button \r\n          onClick={handleDownloadPDF} \r\n          style={{ ...btnStyle, background: '#d32f2f' }}\r\n        >\r\n          Download PDF (Direct)\r\n        </button>\r\n      </div>\r\n\r\n      <style>{`\r\n        @media print {\r\n           .no-print { display: none !important; }\r\n           /* Ensure body margin is reset */\r\n           body { margin: 0; padding: 0; }\r\n        }\r\n      `}</style>\r\n      \r\n      {/* Template */}\r\n      <MarksheetTemplate ref={reportRef} data={data} />\r\n    </div>\r\n  );\r\n}\r\n\r\nconst btnStyle = {\r\n  padding: '10px 16px', \r\n  fontSize: 14, \r\n  fontWeight: 'bold',\r\n  cursor: 'pointer',\r\n  background: '#1976d2',\r\n  color: 'white',\r\n  border: 'none',\r\n  borderRadius: 4\r\n};\r\n"],"mappings":";;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,MAAM,QAAQ,OAAO;AAC1D,SAASC,SAAS,QAAQ,kBAAkB;AAC5C,OAAOC,GAAG,MAAM,oBAAoB;AACpC,SAASC,OAAO,QAAQ,2BAA2B;AACnD,OAAOC,iBAAiB,MAAM,oCAAoC;AAClE,OAAOC,QAAQ,MAAM,aAAa;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEnC,eAAe,SAASC,gBAAgBA,CAAA,EAAG;EAAAC,EAAA;EACzCN,OAAO,CAAC,CAAC;EACT,MAAM;IAAEO,QAAQ;IAAEC;EAAO,CAAC,GAAGV,SAAS,CAAC,CAAC;EACxC,MAAM,CAACW,IAAI,EAAEC,OAAO,CAAC,GAAGd,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACe,OAAO,EAAEC,UAAU,CAAC,GAAGhB,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAMiB,SAAS,GAAGhB,MAAM,CAAC,CAAC;EAE1BF,SAAS,CAAC,MAAM;IACd,eAAemB,SAASA,CAAA,EAAG;MACzB,IAAI;QACF,MAAMC,GAAG,GAAG,MAAMhB,GAAG,CAACiB,GAAG,CAAC,gBAAgB,EAAE;UAC1CC,MAAM,EAAE;YAAEV,QAAQ;YAAEW,OAAO,EAAEV;UAAO;QACtC,CAAC,CAAC;QACF,IAAIW,UAAU,GAAGJ,GAAG,CAACN,IAAI;QACzB,IAAIW,KAAK,CAACC,OAAO,CAACF,UAAU,CAAC,IAAIA,UAAU,CAACG,MAAM,GAAG,CAAC,EAAE;UACtDH,UAAU,GAAGA,UAAU,CAAC,CAAC,CAAC;QAC5B,CAAC,MAAM,IAAIC,KAAK,CAACC,OAAO,CAACF,UAAU,CAAC,IAAIA,UAAU,CAACG,MAAM,KAAK,CAAC,EAAE;UAC7DH,UAAU,GAAG,IAAI;QACrB;QACAT,OAAO,CAACS,UAAU,CAAC;MACrB,CAAC,CAAC,OAAOI,GAAG,EAAE;QACZC,OAAO,CAACC,KAAK,CAAC,wBAAwB,EAAEF,GAAG,CAAC;MAC9C,CAAC,SAAS;QACRX,UAAU,CAAC,KAAK,CAAC;MACnB;IACF;IACAE,SAAS,CAAC,CAAC;EACb,CAAC,EAAE,CAACP,QAAQ,EAAEC,MAAM,CAAC,CAAC;EAEtB,MAAMkB,iBAAiB,GAAGA,CAAA,KAAM;IAC9B,IAAI,CAACb,SAAS,CAACc,OAAO,EAAE;IACxB,MAAMC,OAAO,GAAGf,SAAS,CAACc,OAAO;IAEjC,MAAME,GAAG,GAAG;MACVC,MAAM,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC;MAAE;MACxBC,QAAQ,EAAE,UAAUxB,QAAQ,IAAIE,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAES,OAAO,MAAM;MACnDc,KAAK,EAAE;QAAEC,IAAI,EAAE,MAAM;QAAEC,OAAO,EAAE;MAAK,CAAC;MACtCC,WAAW,EAAE;QAAEC,KAAK,EAAE;MAAE,CAAC;MAAE;MAC3BC,KAAK,EAAE;QAAEC,IAAI,EAAE,IAAI;QAAEC,MAAM,EAAE,IAAI;QAAEC,WAAW,EAAE;MAAY;IAC9D,CAAC;IAEDtC,QAAQ,CAAC,CAAC,CAACuC,GAAG,CAACZ,GAAG,CAAC,CAACa,IAAI,CAACd,OAAO,CAAC,CAACe,IAAI,CAAC,CAAC;EAC1C,CAAC;EAED,IAAIhC,OAAO,EAAE,oBAAOP,OAAA;IAAAwC,QAAA,EAAK;EAAiB;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;EAChD,IAAI,CAACvC,IAAI,EAAE,oBAAOL,OAAA;IAAAwC,QAAA,EAAK;EAAkB;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;EAE/C,oBACE5C,OAAA;IAAAwC,QAAA,gBAEExC,OAAA;MAAK6C,SAAS,EAAC,UAAU;MAACC,KAAK,EAAE;QAAEC,OAAO,EAAE,EAAE;QAAEC,SAAS,EAAE,OAAO;QAAEC,GAAG,EAAE,EAAE;QAAEC,OAAO,EAAE,MAAM;QAAEC,cAAc,EAAE,UAAU;QAAEC,UAAU,EAAE;MAAU,CAAE;MAAAZ,QAAA,gBAChJxC,OAAA;QACEqD,OAAO,EAAEA,CAAA,KAAMC,MAAM,CAACC,KAAK,CAAC,CAAE;QAC9BT,KAAK,EAAEU,QAAS;QAAAhB,QAAA,EACjB;MAED;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACT5C,OAAA;QACEqD,OAAO,EAAE/B,iBAAkB;QAC3BwB,KAAK,EAAE;UAAE,GAAGU,QAAQ;UAAEJ,UAAU,EAAE;QAAU,CAAE;QAAAZ,QAAA,EAC/C;MAED;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC,eAEN5C,OAAA;MAAAwC,QAAA,EAAQ;AACd;AACA;AACA;AACA;AACA;AACA;IAAO;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,eAGV5C,OAAA,CAACH,iBAAiB;MAAC4D,GAAG,EAAEhD,SAAU;MAACJ,IAAI,EAAEA;IAAK;MAAAoC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC9C,CAAC;AAEV;AAAC1C,EAAA,CA7EuBD,gBAAgB;EAAA,QACtCL,OAAO,EACsBF,SAAS;AAAA;AAAAgE,EAAA,GAFhBzD,gBAAgB;AA+ExC,MAAMuD,QAAQ,GAAG;EACfT,OAAO,EAAE,WAAW;EACpBY,QAAQ,EAAE,EAAE;EACZC,UAAU,EAAE,MAAM;EAClBC,MAAM,EAAE,SAAS;EACjBT,UAAU,EAAE,SAAS;EACrBU,KAAK,EAAE,OAAO;EACdC,MAAM,EAAE,MAAM;EACdC,YAAY,EAAE;AAChB,CAAC;AAAC,IAAAN,EAAA;AAAAO,YAAA,CAAAP,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}